CONTENTS OF THIS FILE
---------------------

  * Summary
  * Configuration
  * Api functions
  * Credits


SUMMARY
-------

這個模組可以把校務行政學生學籍資料，包含：學生姓名（包含自造字自動轉碼以解決亂碼問題）
、地址（採用自動探勘技術取得完整地址及正確的郵遞區號）、父母監護人、連絡電話（採用複數
比對法依序檢查第一監護人手機、辦公電話、家庭電話、第二監護人手機、辦公電話、家庭電話、
居住地連絡電話...等以避免欄位留白）、學生的就讀班級以及座號。同步到學生健康管理系統時，
可以根據需要更新資料或建立新的學生帳號（新生或轉入生）。

此模組也支援將學生健康管理系統中的轉出學生帳號自動刪除的功能，請依照各校座號安排的情形
（例如：座號空號不回收或是要回收）來決定是否使用該項附加功能。當需要刪除轉出生帳號時，
模組會依照您的要求將該轉出生的所有健康檢查紀錄回存到校務行政系統中，以因應事後之調閱。

這個模組也會讀取學生健康管理系統的健康檢查資料，包含：身高、體重、體脂肪指數（由模組
自動換算）、左右眼裸視及矯正視力（自動進行負值轉換：-1 轉為 <0.1，-6~-9 轉為 *-6~*-9）
、視力診斷結果（校務行政系統匯入程式不處理，但本模組會幫您轉換為字串轉存到校務行政系統
中）。

以上健康檢查紀錄會同步回校務行政系統，但只會同步該學期的資料，因此這個同步作業也是需要
一個學期做一次。為何不要批次將學生的所有歷史健康檢查紀錄全部存回校務行政系統呢？
這是因為兩個系統的設計不同，在校務行政系統中所有學生無論轉出與否，會留存所有資料，但是
學生健康管理系統會移除轉出學生的資料，因此必須先轉存成 XML 文件離線保存。所以在同步運
算時，如果該轉出生帳號已經被學生健康管理系統移除，則該生之健康檢查紀錄會流失無法回存到
校務行政系統資料庫中，此現象時間越久流失資料會越多，因此在模組設計上故意要求每學期進行
同步。

CONFIGURATION
-------------
在 Linux 裡要透過 php 連接微軟資料庫，必須安裝 freetds 和 php-mssql 兩個套件，由於 freetds
不在官方的 repo 裡所以必須先安裝 EPEL repo，然後用 yum 直接安裝。

yum install freetds php-mssql

裝好後必須設定 freetds.conf，加入以下幾行：
[伺服器名稱]
host=伺服器的 DN 或 IP
port=1433

設定好了，記得要重新啟動 apache 讓變更生效。

API FUNCTIONS
-------------

1. mssql_test()
檢測微軟資料庫伺服器相關設定值是否正確。

2. mssql_operate()
共用模組連線物件 mssql_conn，並執行指定的 SQL 語法。

CREDITS
-------
模組開發與維護: 李忠憲 <leejoneshane@gmail.com>